execute_process(
	COMMAND @ENV_GIT_COMMAND@ -C @GIT_REPO@ switch -C @GIT_BRANCH@ --track origin/@GIT_BRANCH@
	WORKING_DIRECTORY @GIT_REPO@
	RESULT_VARIABLE GIT_RESULT
	OUTPUT_VARIABLE GIT_OUT
	ERROR_VARIABLE GIT_ERROR
)

if(GIT_OUT AND GIT_VERBOSE)
	message(STATUS "${GIT_OUT}")
endif()
if(GIT_ERROR)
	message(STATUS "${GIT_ERROR}")
endif()
if(NOT GIT_RESULT EQUAL 0)
	message(FATAL_ERROR "Git switch failed (exit ${GIT_RESULT}). See error output above for details.")
endif()