From 97519d3a3fc13c05267cfae838fc4d1b92cf334c Mon Sep 17 00:00:00 2001
From: "David C. Manuelda" <StormByte@gmail.com>
Date: Fri, 26 Dec 2025 16:23:04 +0100
Subject: [PATCH 1/2] Fix vpx: Add top-level flag if libvpx is present

---
 meson.build | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/meson.build b/meson.build
index 5337a2138e..5fb6230d61 100644
--- a/meson.build
+++ b/meson.build
@@ -3280,6 +3280,13 @@ endif
 
 all_components = avcodec_components_list + avdevice_components_list + avfilter_components_list + avformat_components_list
 
+# Ensure top-level flags for grouped libraries like libvpx exist
+# If any libvpx subcomponent check passed or the option was explicitly enabled,
+# make sure `libvpx` is present for the depresolver step.
+if not conf.has('libvpx')
+  conf.set10('libvpx', (conf.get('libvpx_vp8_decoder', 0) == 1 or conf.get('libvpx_vp8_encoder', 0) == 1 or conf.get('libvpx_vp9_decoder', 0) == 1 or conf.get('libvpx_vp9_encoder', 0) == 1 or get_option('libvpx').enabled()).to_int())
+endif
+
 tmpconfig_h = configure_file(configuration: conf, output: 'tmpconfig.h')
 
 # Working around Windows command line limitation
-- 
2.52.0

